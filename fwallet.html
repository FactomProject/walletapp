<!DOCTYPE html>
<html>
<head>
<title>fwallet</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" type="image/png" href="./images/favicon.png">
<script type="text/javascript" src="jquery-2.1.4.min.js"></script>


        <script type="text/javascript" charset="utf-8">
        
            $( document ).ready(function() {
                getBalances()
                hideSelect()
            });
            
            function hideSelect(){
              var elem = document.getElementById('txSelect');
              elem.style.display = 'none';
            }

            function showSelect(){
              var elem = document.getElementById('txSelect');
              elem.style.display = 'inline';
            }

          var getBalance = function () {
                             $.ajax({
                               url: 'receive',
                               type: 'post',
                               dataType: 'html',
                               data : { call_type: "balance", ajax_post_data: $('#txInput').val()},
                               success : function(data) {
                                 $('#txtBox').text(data);
                               },
                             });
                          };
                          
          var getBalances = function () {
                         $.ajax({
                           url: 'receive',
                           type: 'post',
                           dataType: 'html',
                           data : { call_type: "balances", ajax_post_data: ''},
                           success : function(data) {
                             if(data === '') {
                                 $('#txtBox').text("NO BALANCES TO DISPLAY");
                             } else {
                                 $('#txtBox').text(data);
                             }
                           },
                         });
                      };
                      
          var getTxs = function () {
                         $.ajax({
                           url: 'receive',
                           type: 'post',
                           dataType: 'html',
                           data : { call_type: "allTxs", ajax_post_data: ''},
                           success : function(data) {
                             if(data === '') {
                                 $('#txtBox').text("NO TRANSACTIONS TO DISPLAY");
                             } else {
                                 $('#txtBox').text(data);
                             }
                           },
                         });
                      };
                          
          var addNewTx = function () {
                             $.ajax({
                               url: 'receive',
                               type: 'post',
                               dataType: 'html',
                                                              
                               data : { call_type: "addNewTx", ajax_post_data: $('#addNewTxKey').val()},
                               success : function(data) {
                                     showSelect();
                                     $('#txSelect')
                                        .append($("<option></option>")
                                         .attr("value",data)
                                         .text(data)); 
                                     //$('#txtBox').text("Added transaction: " + data);
                               
                                 }
                             });
                          };                          
          
                          
          var displayHelp = function () {
                             $.ajax({
                               url: 'receive',
                               type: 'get',
                               dataType: 'html',
                               success : function(data) {
                                 /*alert('ajax data posted');*/
                                 $('#txtBox').text(data);
                               },
                             });
                          };

            $( ".target" ).change(function() {
              console.log( "Handler for .change() called." );
            });
          
          </script>


<style type="text/css">
    html, body {
        background-image:url('images/bg.png');
        color:white;
        margin: 0;
        padding: 0;
        height: 98%;
        width: 100%;
        font: 18px Georgia, "Times New Roman", Times, serif;
    }
    #help-button, #add-button {
        background-color: Transparent;
        border: none;
        outline:none;
        cursor:pointer;
    }
    #help-button img, #add-button img {
        display: block;
        height: 30px;  
        width: 30px;
    }
    #container { width: 100%; height: 10%;margin:auto; }
    /*h1.heading{ color:white; text-align:center;font: 27px Georgia, "Times New Roman", Times, serif; font-weight: bold; }*/
    input { text-align:center; }
</style>

</head>
<body>
    <div style="width:100%; height:100%;">
        <div align="center" style="float:center;"><h1 class="heading">fwallet</h1></div>
        <div id="container">
            <!--<div id="inputBar" align="center">
               <input type="text" id="addressInput" size="100">
            <br> <font color="white">Input</font>
            </div>-->
            <div id="actionBar" align="center">
                <div id="newTransaction" align="center">New Transaction<br>
                    <input type="text" id="addNewTxKey" size=32 maxlength=32>
                    <br><button  id="add-button" title="New Transaction" onclick="addNewTx();"><img src="./images/addbutton.png"></button>
                    <br><select id="txSelect"></select>
                </div><br>
                <div id="txDetails">
                    <table>
                     <tr>
                        <td><input type="text" id="txInput" size=55 class="target"></td>
                        <td><input type="number" name="buyECquantity" min="1"></td> 
                        <td><input type="text" id="txOutput" size=55></td>
                        <td><input type="button" onclick="searchEC()" value="Add Input/Output"></td>
                     </tr> 
                     <tr>
                        <td align="center">Input</td>
                        <td align="center"><label id="becLabel" for="buyECquantity">Amount</label></td>
                        <td align="center">Output</td></font>
                        <td></td>
                     </tr>
                    </table>
                </div><br>
                <div id="displayBalances"><input type="button" id="getBalButton" onclick="getBalance()" value="Individual Balance"> <input type="button" id="getBalsButton" onclick="getBalances()" value="Total Balances"> <input type="button" id="getTxsButton" onclick="getTxs()" value="Show All Transactions">
                </div>
            <br>
            </div>
            <div id="outputBar" align="center">
                <textarea id="txtBox" type="text" value="" rows="20" cols="110" text-align=left style="font-size: large; font-weight: bold; color: white; background-color: transparent;"></textarea>
            </div>
            <div align="center" style="float:right;"><font size="2">Help<br></font>
                <button id="help-button" title="Help" onclick="displayHelp();"><img src="./images/qmark2.png"></button>
            </div>
        </div>

    </div>

</body>
</html>
